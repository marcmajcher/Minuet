(this.webpackJsonpminuet=this.webpackJsonpminuet||[]).push([[0],{13:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(5),r=n.n(c),s=(n(13),n(2)),i=n(4),u=n(3);function l(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=0,o=0;o<n;o++)a+=Math.random()*(t-e)+e;return a}var d={available_biomass:{amount:0,decay:.5,generate_min:60,generate_max:90},cool_explore:{type:"cooldown",max:12,seconds:0}},b=Object(u.b)({name:"data",initialState:d,reducers:{warmCooldowns:function(e,t){var n=t.payload;Object.entries(e).forEach((function(t){var a=Object(i.a)(t,2),o=a[0],c=a[1],r=n/1e3;"cooldown"===c.type&&c.seconds>0&&(e[o].seconds=Math.max(c.seconds-r,0))}))},startCooldown:function(e,t){var n=t.payload;e[n].seconds=e[n].max},addColonistBiomass:function(e,t){var n=t.payload;e.available_biomass.amount+=l(e.available_biomass.generate_min,e.available_biomass.generate_max,n||1)},decayBiomass:function(e){e.available_biomass.amount-=e.available_biomass.amount*e.available_biomass.decay}}}),m=b.actions,j=m.warmCooldowns,f=m.startCooldown,p=m.addColonistBiomass,O=m.decayBiomass,x=b.reducer,v={stability:{id:1,name:"res_stability",amount:100,rate:-1.67,max:100,type:"common",state:"hidden"},xp:{id:3,name:"res_experience",amount:0,rate:0,max:60,type:"res_common",state:"hidden"},biomass:{id:4,name:"res_biomass",amount:0,rate:0,max:200,type:"common",state:"hidden"},egregore:{id:20,name:"res_egregore",amount:0,rate:0,max:Number.MAX_VALUE,type:"persistent",state:"hidden"}},g=Object(u.b)({name:"resources",initialState:v,reducers:{updateAllResources:function(e,t){var n=t.payload/1e3;Object.entries(e).forEach((function(t){var a=Object(i.a)(t,2),o=a[0],c=a[1];if(0!==c.rate){var r=Math.max(e[o].amount+c.rate*n,0);e[o].amount=Math.min(r,e[o].max)}}))},addResource:function(e,t){var n=t.payload,a=n.resource,o=n.amount;e[a].amount+=o},setResourceRate:function(e,t){var n=t.payload,a=n.resource,o=n.rate;e[a].rate=o},showResource:function(e,t){e[t.payload].state="active"},setDefaultResources:function(e){Object.entries(v).forEach((function(t){var n=Object(i.a)(t,2),a=n[0],o=n[1];e[a]=o}))}}}),_=g.actions,h=_.updateAllResources,y=(_.setResourceRate,_.setDefaultResources),w=_.showResource,E=_.addResource,R=g.reducer,S={btn_clear:"Clear",btn_decant:"Decant",btn_explore:"Explore",btn_save:"Save",msg_log_start:"[LOG] Begin Messages",msg_decant:"[SYS] colonist {colonist} released from cryosleep :: instability {stability}",msg_no_resources:"[RESOURCES UNAVAILABLE]",msg_colonist_expired:"[SYS] colonist {colonist} expired :: unviable",res_stability:"Stability",res_experience:"Experience",res_biomass:"Biomass",res_egregore:"Egregore"};var N=S,C={debug:!1,fps:5,logEntries:[N.msg_log_start],paused:!0,frozen:!0,decants:0,colonistId:-1},I=Object(u.b)({name:"game",initialState:C,reducers:{pause:function(e){e.paused=!0},unpause:function(e){e.paused=!1},debug:function(e,t){e.debug=t.payload},setFPS:function(e,t){e.fps=t.payload},freeze:function(e){e.paused=!0,e.frozen=!0},start:function(e){e.paused=!1,e.frozen=!1},log:function(e,t){var n,a=t.payload;n="object"===typeof a?function(e){var t=S[e.template];for(var n in e)t=t.replace("{".concat(n,"}"),e[n]);return t}(a):N[a]?N[a]:a,e.logEntries.push(n),console.log("[LOG]",n)},decant:function(e){e.paused=!1,e.frozen=!1,e.decants+=1},setColonistId:function(e,t){var n=t.payload;e.colonistId=n}}}),M=I.actions,A=M.pause,z=M.unpause,B=(M.debug,M.setFPS,M.freeze),k=(M.start,M.log),L=M.decant,D=M.setColonistId,F=I.reducer;function U(){var e=Object(s.b)(),t=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.game.colonistId}));return function(n){n.stability.amount<=0&&(e(B()),e(k({template:"msg_colonist_expired",colonist:t})),e(p()),e(O()))}}(),n=Object(s.c)((function(e){return e.resources})),o=Object(s.c)((function(e){return e.game.paused})),c=Object(s.c)((function(e){return e.game.fps})),r=c>0?1e3/c:Number.MAX_VALUE,i=Object(a.useRef)((function(){e(h(r)),e(j(r))}));Object(a.useEffect)((function(){if(c>0&&!o){var e=setInterval((function(){i.current(r),t(n)}),r);return function(){return clearInterval(e)}}}),[c,r,o,n])}var G=n(1);function V(e){var t=e.resource,n=t.name,a=t.amount,o=t.rate,c=t.max,r=t.type,s=t.state;return Object(G.jsxs)("div",{className:"resource ".concat(s," ").concat(r),children:[Object(G.jsxs)("strong",{children:[N[n],":"]})," ",a.toFixed(2),"/",c," ",0!==o?"(".concat(o.toFixed(2),"/sec)"):""]})}function H(){var e=Object(s.c)((function(e){return e.game.decants})),t=Object(s.c)((function(e){return Object.values(e.resources)}));return Object(G.jsx)("div",{className:"resource-list",children:e>0?t.map((function(e){return Object(G.jsx)(V,{resource:e},e.id)})):N.msg_no_resources})}function J(){var e=Object(s.c)((function(e){return e.game.logEntries}));return Object(G.jsx)("div",{className:"log-entries",children:e&&e.map((function(e){return Object(G.jsx)("p",{children:e},Math.random())}))})}function P(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.resources.stability.rate})),n=Date.now().toString().substr(-8);return Object(G.jsx)("button",{className:"button-primary",onClick:function(){e(y()),e(L()),e(w("stability")),e(D(n)),e(k({template:"msg_decant",colonist:n,stability:t<0?"HIGH":"none"}))},children:N.btn_decant})}function X(e){var t=e.cooldown,n=e.cool_id,a=e.label_id,o=e.callback,c=Object(s.b)();return Object(G.jsxs)("div",{className:"btn-cooldown",children:[Object(G.jsx)("div",{className:"btn-cooldown-bar",style:{width:"".concat(t.seconds/t.max*100,"%")}}),Object(G.jsxs)("button",{className:"cooldown",disabled:t.seconds>0,onClick:function(){c(f(n)),o()},children:[N[a]," : ",Math.ceil(t.seconds)]})]})}function Y(){var e=Object(s.c)((function(e){return e.data.cool_explore})),t=Object(s.c)((function(e){return e.resources.xp})),n=Object(s.b)();return Object(G.jsx)(X,{cooldown:e,cool_id:"cool_explore",label_id:"btn_explore",callback:function(){n(k("Exploring....TK")),n(E({resource:"xp",amount:1})),"hidden"===t.state&&n(w("xp"))}})}function K(){var e=Object(s.c)((function(e){return e.game.frozen}));return Object(G.jsx)("div",{className:"action-panel",children:e?Object(G.jsx)(P,{}):Object(G.jsx)(Y,{})})}function T(){return Object(G.jsxs)("div",{className:"main-page",children:[Object(G.jsx)(H,{}),Object(G.jsx)(K,{}),Object(G.jsx)(J,{})]})}var q=n.p+"static/media/orbital.391d4365.svg";function Q(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.game.paused})),n=Object(s.c)((function(e){return e.game.frozen}));return Object(G.jsxs)("header",{children:[Object(G.jsx)("h1",{children:"minuet"}),Object(G.jsx)("img",{className:t?"orbit":"orbit spin",src:q,alt:"orbit logo",onClick:t&&!n?function(){return e(z())}:function(){return e(A())}})]})}function W(){return Object(G.jsxs)("footer",{children:[Object(G.jsx)("button",{children:N.btn_save})," ",Object(G.jsx)("button",{children:N.btn_clear})]})}var Z=function(){return U(),Object(G.jsxs)("div",{className:"container",children:[Object(G.jsx)(Q,{}),Object(G.jsx)(T,{}),Object(G.jsx)(W,{})]})},$=Object(u.a)({reducer:{resources:R,game:F,data:x}});r.a.render(Object(G.jsx)(o.a.StrictMode,{children:Object(G.jsx)(s.a,{store:$,children:Object(G.jsx)(Z,{})})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.cb396619.chunk.js.map