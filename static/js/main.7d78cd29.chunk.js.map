{"version":3,"sources":["Header.js","TestResource.js","hooks/useFormat.js","lib/actions.js","App.js","hooks/useHeartbeat.js","lib/store.js","index.js"],"names":["Header","TestResource","dispatch","useDispatch","format","num","Math","round","dummyResource","useSelector","s","resources","amount","rate","onClick","resource","type","App","paused","fps","callback","ms","intervalRef","useRef","startBeat","current","setInterval","pauseBeat","clearInterval","useEffect","useBeat","updateAllResources","className","defaultStore","heartBeat","undefined","store","createStore","action","console","log","JSON","stringify","payload","Object","entries","forEach","entry","data","dummyResourceAmount","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7d78cd29.chunk.js","sourcesContent":["export default function Header() {\n  return <h1>minuet</h1>\n}","import { useDispatch, useSelector } from 'react-redux';\nimport useFormat from './hooks/useFormat';\nimport { setResoruceRate } from './lib/actions';\n\nexport default function TestResource() {\n  const dispatch = useDispatch();\n  const format = useFormat();\n  const dummyResource = useSelector((s) => s.resources.dummyResource);\n\n  function addRate() {\n    dispatch(setResoruceRate('dummyResource', dummyResource.rate + 1));\n  }\n\n  return (\n    <div>\n      <div>\n        DummyResource: {format(dummyResource.amount)} ({format(dummyResource.rate)}/sec)\n      </div>\n      <button onClick={addRate}>+1/sec</button>\n    </div>\n  );\n}\n","export default function useFormat() {\n  return function (num) {\n    return Math.round(num * 100) / 100;\n  };\n}\n","export const setHeartbeat = (beat) => ({\n  type: 'SET_HEARTBEAT',\n  payload: beat,\n});\n\nexport const updateAllResources = (ms) => ({\n  type: 'UPDATE_ALL_RESOURCES', ms\n})\n\nexport const addResourceAmount = (resource, amount) => ({\ntype: 'ADD_RESOURCE_AMOUNT', resource, amount\n})\n\nexport const setResoruceRate = (resource, rate) => ({\n  type: 'SET_RESOURCE_RATE', resource, rate\n})\n\nexport const pause = () => ({type: 'PAUSE'})\nexport const start = () => ({type: 'START'})","import './css/App.css';\nimport { useBeat } from './hooks/useHeartbeat';\nimport Header from './Header';\nimport TestResource from './TestResource';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateAllResources } from './lib/actions';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const paused = useSelector((s) => s.paused);\n\n  const { startBeat, pauseBeat } = useBeat(5, (ms) => {\n    dispatch(updateAllResources(ms));\n  });\n\n  return (\n    <div className=\"container\">\n      <Header />\n      Running: {paused ? 'nope.' : 'yup!'}\n      <TestResource />\n      {paused ? (\n        <button onClick={startBeat}>Start</button>\n      ) : (\n        <button onClick={pauseBeat}>Pause</button>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import { useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { pause, start } from '../lib/actions';\n\nexport function useBeat(fps, callback) {\n  const ms = 1000 / fps;\n  const dispatch = useDispatch();\n\n  const intervalRef = useRef();\n\n  function startBeat() {\n    intervalRef.current = setInterval(() => callback(ms), ms);\n    dispatch(start());\n  }\n\n  function pauseBeat() {\n    clearInterval(intervalRef.current);\n    dispatch(pause());\n  }\n\n  useEffect(() => {\n    startBeat();\n    return pauseBeat()\n  }, []) // eslint-disable-line react-hooks/exhaustive-deps\n\n  return { startBeat, pauseBeat };\n}\n","import { createStore } from 'redux';\nconst DEBUG = true;\n\nconst defaultStore = {\n  paused: 'butt',\n  heartBeat: undefined,\n  resources: {\n    dummyResource: {\n      amount: 0,\n      rate: 1,\n    },\n  },\n};\n\nfunction reducer(store = defaultStore, action) {\n  DEBUG && console.log(`in reducer: ${JSON.stringify(action)}`);\n  let resources;\n\n  switch (action.type) {\n    case 'PAUSE':\n      return { ...store, paused: true };\n    case 'START':\n      return { ...store, paused: false };\n    case 'SET_HEARTBEAT':\n      return { ...store, heartBeat: action.payload };\n    case 'UPDATE_ALL_RESOURCES':\n      resources = { ...store.resources };\n      Object.entries(resources).forEach((entry) => {\n        const [resource, data] = entry;\n        resources[resource] = {\n          ...resources[resource],\n          amount: resources[resource].amount + (data.rate * action.ms) / 1000,\n        };\n      });\n      return { ...store, resources };\n    case 'ADD_RESOURCE_AMOUNT':\n      const amount = store.dummyResourceAmount + action.amount;\n      resources = {\n        ...store.resources,\n        [action.resource]: {\n          amount,\n          rate: store.resources[action.resource].rate,\n        },\n      };\n      return { ...store, resources };\n    case 'SET_RESOURCE_RATE':\n      resources = {\n        ...store.resources,\n        [action.resource]: {\n          amount: store.resources[action.resource].amount,\n          rate: action.rate,\n        },\n      };\n      return { ...store, resources };\n    default:\n      return store;\n  }\n}\n\nexport const store = createStore(reducer, defaultStore);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { store } from './lib/store';\nimport { Provider } from 'react-redux';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}